continue
@resource
continue
delete
continue
temp_sidecar.data["configured_fields"][key]
key
 sidecar.data["configured_fields"][key]
 sidecar.data["configured_fields"]
 annotations[doc_index][i][new_key]
 annotations[doc_index][i][new_key] = "5"
 annotations[doc_index][i][new_key]
annotations[doc_index][i]
 annotations[doc_index]
continue
@docs
continue
docs[3]._source[:spotlight_full_image_width_ssm]
docs[2]._source[:spotlight_full_image_width_ssm]
docs[1]._source[:spotlight_full_image_width_ssm]
docs[0]._source[:spotlight_full_image_width_ssm]
docs[0]
docs
next
continue
Spotlight::SolrDocument.fetch
Spotlight::SolrDocument.new("1-165")
Spotlight::SolrDocument.find("1-165")
Spotlight::SolrDocument.find("1-165")"
image[0]
continue
image
continue
test.push(Spotlight::SolrDocumentSidecar.where(document_id: item_id).first)
 Spotlight::SolrDocumentSidecar.where(document_id: item_id).first
 test[] = Spotlight::SolrDocumentSidecar.where(document_id: item_id).first
continue
Spotlight::SolrDocumentSidecar.where(document_id: item_id).first
continue
@sidecar
continue
@sidecar
continue
next
@sidecar
next
@sidecar
continue
sc = Spotlight::SolrDocumentSidecar.find(264)
resource = Spotlight::Resource.find(261)
sidecar = document.sidecar document._source[:id]
continue
{"id"=>"1-263", "exhibit_test-exhibit_public_bsi"=>true, "spotlight_exhibit_slug_test-exhibit_bsi"=>true, "spotlight_resource_id_ssim"=>["gid://spotlight/Spotlight::Resources::Upload/263"], "spotlight_resource_type_ssim"=>["spotlight/resources/uploads"], "spotlight_full_image_width_ssm"=>["2869"], "spotlight_full_image_height_ssm"=>["4229"], "full_image_url_ssm"=>["/uploads/spotlight/resources/upload/url/263/557.jp2"], "thumbnail_url_ssm"=>["/uploads/spotlight/resources/upload/url/263/thumb_557.jp2"], "thumbnail_square_url_ssm"=>["/uploads/spotlight/resources/upload/url/263/square_557.jp2"], "_version_"=>1527090234689323008, "timestamp"=>"2016-02-24T20:45:35.658Z"}
document._source
document.sidecar
document
image
continue
next
continue
display @sidecar.data["configured_fields"][key]
continue
display @resource.data[key]
display value
display key
value
key
@resource.data[key]
continue
@resourcecontinue
@resource.url
@resource
 @resource.attributes = params.require(:resources_upload).permit(:url, data: data_param_keys)
data_param_keys = Spotlight::Resources::Upload.fields(@exhibit).map(&:field_name) + @exhibit.custom_fields.map(&:field) + ["items"]
 @resource.attributes = params.require(:resources_upload).permit(:url, data: data_param_keys)
data_param_keys
 @resource.attributes = params.require(:resources_upload).permit(:url, data: data_param_keys)
data_param_keys = Spotlight::Resources::Upload.fields(@exhibit).map(&:field_name) + @exhibit.custom_fields.map(&:field) + [:items]
Spotlight::Resources::Upload.fields(@exhibit).map(&:field_name)
data_param_keys
 @resource.attributes = params.require(:resources_upload).permit(:url, data: data_param_keys)
@resource[:url] = @thumb_resource[:url]
@resource[:url]
@resource
next
 params[:resources_upload][:url]
next
@thumb_resource[:url]
@thumb_resource
next
params[:data][:items].first.split("-")[1]
continue
contine
params[:data][:items].first
params[:data][:items]
params[:data]
@resource[:url]
@resource.url
@resource
next
data_param_keys
next
continue
e.inspect
e
continue
next
continue
resource_dir
continue
e
continue
next
@sidecar
@resource
next
@resource
next
continue
connue
next
@sidecar
@resource
next
@sidecar
@resource
next
continue
next
@resource
next
@resource
next
continue
next
params[:resources_upload][:data] = params[:data]
params[:resources_upload][:url] = @thumb_resource[:url]
params[:resources_upload] = {}
 @thumb_resource = Spotlight::Resource.find(params[:data][:items].first.split("-")[1])
 FileUtils.rm_rf(Dir.glob(resource_dir))
resource_dir = resource_dir.sub @resource[:url], "*"
 resource_dir = @resource.url.file.file.to_s.dup
next
continue
e
next
e
next
new_url = new_url.sub! "/"+@thumb_resource.id.to_s+"/", "/"+@resource.id.to_s+"/"
new_url = @thumb_resource.url.file.file.to_s.dup
params[:resources_upload][:url] = @thumb_resource[:url]
 @thumb_resource = Spotlight::Resource.find(params[:data][:items].first.split("-")[1])
FileUtils.rm_rf(Dir.glob(resource_dir))
resource_dir = resource_dir.sub @resource[:url], "*"
resource_dir = @resource.url.file.file.to_s.dup
@resource.url.file.file.to_s
@resource.url.file.file
next
continue
resource_dir = @resource.url.file.file.to_s.sub @resource[:url], "*"
next
continue
next
continue
CONTINUE
FileUtils.rm_rf(Dir.glob(dir))
FileUtils.rm_rf(Dir.glob(dir)
dir
dir = (@resource.url.file.file.to_s.sub @resource[:url], "*")
(@resource.url.file.file.to_s.sub @resource[:url], "*")
next
continue
next
continue
resource_dir
next
continue
contineu
continue
item
continue
@sidecar.data["configured_fields"]["items"]
@sidecar.data["configured_fields"]
@sidecar = @sidecar.first
@sidecar[:data]["configured_fields"]
@sidecar.data["configured_fields"]
@sidecar
continue
@resource = Spotlight::Resource.find(params[:id].split('-')[1])
Spotlight::Resource.find(params[:id].split('-')[1])
@resource
continue
@resource[:data][
@resource = Spotlight::Resource.find(params[:id].split('-')[1])
@resource = Spotlight::Resource.find(params[:id].split('-')[1])Spotlight::Resource.find(params[:id].split('-')[1])
Spotlight::Resource.find(params[:id].split('-')[1])Spotlight::Resource.find(params[:id].split('-')[1])
Spotlight::Resource.find(params[:id].split('-')[1])
Spotlight::Resource.where(id: params[:id].split('-')[1])
Spotlight::Resource.where(doc_id: params[:id])
@resource
config.field_name
continue
temp.data["configured_fields"].has_key? "items"
temp.data["configured_fields"]["items"]
temp.data["configured_fields"]
temp.data[:configured_fields]
temp.data["items"]
temp.data[:items]
temp.data
temp = document.sidecar(document.id)
document.sidecar(document.id)[:items]
document.sidecar(document.id).items
document.sidecar document.id
document.id
document.sidecar "1-261"
document.sidecar "f"
document.sidecar
document._target
document.target
document
document._source["data"]
document._source.data
document._source.data.
document._source[:data]
document._source
document.data
document[:data]
document.items
document
continue
next
@thumb_resource.url.square.file.file
new_url
next
continue
e
next
new_url
next
new_url
next
continue
new_url
@thumb_resource.url.thumb.file.file
next
continue
next
nex
continue
FileUtils.cp("/home/ophelia/spotlight/public/uploads/spotlight/resources/upload/url/199/thumb_654.jp2", new_url)
@thumb_resource.url.thumb.file.file = "/home/ophelia/spotlight/public/uploads/spotlight/resources/upload/url/199/thumb_654.jp2"
@thumb_resource.url.thumb.file.file
new_url = @thumb_resource.url.thumb.file.file.sub! "/"+@thumb_resource.id.to_s+"/", "/"+@resource.id.to_s+"/"
new_url
FileUtils.cp("/home/ophelia/spotlight/public/uploads/spotlight/resources/upload/url/199/square_654.jp2", new_url)
FileUtils.cp("/home/ophelia/spotlight/public/uploads/spotlight/resources/upload/url/258/square_654.jp2", new_url)
